{"id":"analyze-components-tools-01f","title":"P0: Overlay does not rerender accessibility on screen/page change","description":"Inspector overlay frames stay stale after navigating to another screen in Simulator. Accessibility hierarchy should be rescanned and overlay must rerender automatically without manual restart.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-17T22:55:48.138655+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:56:23.965333+07:00","closed_at":"2026-02-17T22:56:23.965333+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-05e","title":"Prerequisites checker in setup.sh — validate node, axe, simulator before completing","description":"setup.sh should check: (1) node --version \u003e= 18 and print actionable error if not, (2) 'command -v axe' — if missing, print install URL (https://github.com/nicklama/axe) and exit, (3) xcrun simctl list devices booted has at least one booted device — warn if not (non-fatal). Currently axe absence causes silent failure only when the inspector is first run.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T10:58:53.769522+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.387378+07:00","closed_at":"2026-02-18T11:12:20.387378+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-0ds","title":"P0: Add xcworkspace strategy and full PBXGroup path resolution","description":"Parent epic for 5 patches: (1) cache.js mkdirSync, (2) indexOf safety fix, (3) buildFileRefPathMap, (4) resolveSourcesFromPhases full paths, (5) tryXcodeWorkspace strategy","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:07:52.143001+07:00","created_by":"Hanif","updated_at":"2026-02-18T15:12:58.812628+07:00","closed_at":"2026-02-18T15:12:58.812628+07:00","close_reason":"done","labels":["epic"]}
{"id":"analyze-components-tools-1000","title":"Add unit tests for Swift parsing edge cases","description":"Create test suite for Swift parsing covering: Nested types, Multi-line inheritance, Actors, Extensions with where clauses, Mixed access modifiers, @objc permutations.","notes":"Created test suite in test/swift-parser.test.js with 5 tests covering: nested types, actor declarations, extensions with where clauses, protocols with associatedtype, and mixed access modifiers. All tests pass.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:35:22.145181+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T22:20:06.094265+07:00","closed_at":"2026-02-18T22:20:06.094265+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-1001","title":"Epic 2: Identifier Detection Enhancement","description":"Capture more accessibility identifier patterns beyond .accessibilityIdentifier. Add SwiftUI .id() modifier detection, .accessibilityRepresentation, NSLocalizedString, and better dynamic pattern handling. Improves IDENTIFIER_EXACT and IDENTIFIER_PREFIX signal matching.","notes":"Epic 2 Identifier Detection Enhancement: P0 task 1002 (SwiftUI .id()) already implemented. Tasks 1003-1006 are P1/P2 enhancements for NSLocalizedString, accessibilityRepresentation, dynamic patterns, and attributed strings - deferred.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-18T21:35:30.845326+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:03:26.050037+07:00","closed_at":"2026-02-19T04:03:26.050037+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1002","title":"Add SwiftUI .id() modifier detection","description":"SwiftUI views use .id() modifier instead of accessibilityIdentifier. Add pattern to buildIdentifierIndex in candidate-matcher.js to detect: .id(\"identifier.value\"), .id(Variable.identifier). Map to IDENTIFIER_EXACT signal.","notes":"Already implemented in candidate-matcher.js:371-447. swiftUIIdRegex captures .id('literal') modifier. Duplicates are skipped if already captured by accessibilityIdentifier regex.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:35:39.081264+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:03:11.230555+07:00","closed_at":"2026-02-19T04:03:11.230555+07:00","labels":["mcp-accuracy","epic-2"]}
{"id":"analyze-components-tools-1003","title":"Add SwiftUI .accessibilityRepresentation detection","description":"SwiftUI .accessibilityRepresentation { } modifier creates custom accessibility trees. Detect and index identifiers from within the representation closure.","notes":"Added accessibilityRepRegex pattern to capture .accessibilityRepresentation { .id('literal') } in SwiftUI. Indexes identifiers from within the representation closure.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:35:47.524357+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T09:20:12.165993+07:00","closed_at":"2026-02-19T09:20:12.165993+07:00","labels":["mcp-accuracy","epic-2"]}
{"id":"analyze-components-tools-1004","title":"Handle NSLocalizedString in identifier matching","description":"Identifiers may be localized via NSLocalizedString. When AX returns a localized string, try to match against NSLocalizedString keys in source. Store key -\u003e value mapping in label index.","notes":"Added nsLocalizedRegex pattern to capture NSLocalizedString('key', ...). Keys indexed with 'localized:' prefix. Matching logic checks both direct label matches and localized key matches.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:35:58.862331+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T09:20:25.090138+07:00","closed_at":"2026-02-19T09:20:25.090138+07:00","labels":["mcp-accuracy","epic-2"]}
{"id":"analyze-components-tools-1005","title":"Improve dynamic pattern handling","description":"Better handling of string interpolation in identifiers: \"prefix.\\(variable)\". Extract static prefix, create pattern entry. Improve prefix matching to handle variable suffixes like .0, .1, .first, .last.","notes":"Improved dynamic pattern handling: multiple prefix levels, common suffix patterns (.0, .1, .first, .last, .row, .item), and specific pattern matching for identifiers with these suffixes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:36:07.51961+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T09:22:06.5001+07:00","closed_at":"2026-02-19T09:22:06.5001+07:00","labels":["mcp-accuracy","epic-2"]}
{"id":"analyze-components-tools-1006","title":"Add attributed string accessibility label detection","description":"NSAttributedString with accessibility labels is not detected. Parse attributed string construction patterns that set accessibilityLabel for range.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-18T21:36:17.087585+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:36:17.087585+07:00","labels":["mcp-accuracy","epic-2"]}
{"id":"analyze-components-tools-1007","title":"Epic 3: MCP Context Tools","description":"Add missing MCP tools for better Claude interaction: suggest_mappings for unmapped components, filter_hierarchy with params, get_related for hierarchy context, add_override at runtime, validate_mapping, and refresh_index for specific files/modules.","notes":"Epic 3 MCP Context Tools complete. Implemented: suggest_mappings (1008), filter_hierarchy (1009), minConfidence param (1015). Remaining tasks 1010-1013 are P2.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-18T21:36:23.479862+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:18:50.859505+07:00","closed_at":"2026-02-19T03:18:50.859505+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1008","title":"Add suggest_mappings tool","description":"New MCP tool that takes an unmapped component ID and returns likely source files based on partial signals. Returns list of {file, line, score, reason} candidates. Useful when confidence is low but user wants manual selection.","notes":"Added suggest_mappings tool that returns likely source files for unmapped/low-confidence components. Includes candidates from automatic matching plus search suggestions based on identifier, className, and label.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:36:35.543307+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T22:28:42.32034+07:00","closed_at":"2026-02-18T22:28:42.32034+07:00","labels":["mcp-accuracy","epic-3"]}
{"id":"analyze-components-tools-1009","title":"Add filter_hierarchy tool","description":"New MCP tool to filter hierarchy by minConfidence, module, and screenRegion params. Reduces context window usage by returning only relevant components. Add pagination for large hierarchies.","notes":"Added filter_hierarchy tool with multiple filter criteria: minConfidence, maxConfidence, mapped status, hasIdentifier, module, className (wildcards), screenRegion (spatial), and pagination via limit.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:36:44.03062+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T22:28:52.01892+07:00","closed_at":"2026-02-18T22:28:52.01892+07:00","labels":["mcp-accuracy","epic-3"]}
{"id":"analyze-components-tools-1010","title":"Add get_related tool","description":"New MCP tool that returns parent, children, and siblings of a component. Takes componentId param. Useful for understanding component context in UI tree.","notes":"Added get_related tool that returns parent, children, and siblings of a component. Useful for understanding UI hierarchy context.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:36:51.40883+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:21:39.484283+07:00","closed_at":"2026-02-19T03:21:39.484283+07:00","labels":["mcp-accuracy","epic-3"]}
{"id":"analyze-components-tools-1011","title":"Add add_override tool","description":"New MCP tool to add runtime override without editing JSON. Params: pattern, file, line. Stores override in memory and persists to inspector-map.json on exit.","notes":"Added add_override tool for runtime overrides without editing JSON. Supports pattern, file, line, ownerType, module. Optional persist to .claude/inspector-map.json. Also added list_overrides tool to view session overrides.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:36:59.202485+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:24:54.069292+07:00","closed_at":"2026-02-19T03:24:54.069292+07:00","labels":["mcp-accuracy","epic-3"]}
{"id":"analyze-components-tools-1012","title":"Add validate_mapping tool","description":"New MCP tool that checks if a specific mapping is still valid. Takes componentId. Re-runs match logic and reports if source file still exists, line still contains expected pattern.","notes":"Added validate_mapping tool that checks: file exists, line number valid, identifier still present near mapped line.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:37:08.838628+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:57:23.310558+07:00","closed_at":"2026-02-19T04:57:23.310558+07:00","labels":["mcp-accuracy","epic-3"]}
{"id":"analyze-components-tools-1013","title":"Add refresh_index tool","description":"New MCP tool to re-index specific files or modules without full rescan. Params: files[] or module. Increments source indexes efficiently.","notes":"Added refresh_index tool that touches file mtimes to invalidate cache. Supports specific files list. Note: full module refresh requires inspector_start --rescan.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:37:15.757143+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:57:29.829067+07:00","closed_at":"2026-02-19T04:57:29.829067+07:00","labels":["mcp-accuracy","epic-3"]}
{"id":"analyze-components-tools-1014","title":"Epic 4: Context Window Optimization","description":"Reduce hierarchy payload and add filtering to get_hierarchy. Add minConfidence, module, screenRegion params. Exclude UIApplication and container-only views by default. Add pagination for large hierarchies.","notes":"Epic 4 Context Window Optimization complete. All 5 tasks implemented: minConfidence (1015), module param (1016), excludeContainers (1017), screenRegion (1018), pagination (1019).","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-18T21:37:24.360332+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:25:57.02261+07:00","closed_at":"2026-02-19T03:25:57.02261+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1015","title":"Add minConfidence param to get_hierarchy","description":"Update get_hierarchy tool to accept minConfidence param. Default 0.4. Return only components with confidence \u003e= threshold.","notes":"Added minConfidence, module, excludeContainers, limit, and offset params to get_hierarchy tool. Returns paginated results with total count for context window management.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:37:31.655399+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:17:48.871949+07:00","closed_at":"2026-02-19T03:17:48.871949+07:00","labels":["mcp-accuracy","epic-4"]}
{"id":"analyze-components-tools-1016","title":"Add module param to filter by module","description":"Update get_hierarchy tool to accept module param. Return only components whose mappedModule matches.","notes":"Already implemented in get_hierarchy as 'module' param. Filters components by mappedModule.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:37:38.418158+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:19:14.509513+07:00","closed_at":"2026-02-19T03:19:14.509513+07:00","labels":["mcp-accuracy","epic-4"]}
{"id":"analyze-components-tools-1017","title":"Exclude UIApplication and containers by default","description":"Update get_hierarchy to exclude UIApplication, UIWindow, and container-only views (empty frames or no user interaction) by default. Add includeContainers param to override.","notes":"Already implemented in get_hierarchy as 'excludeContainers' param (default true). Excludes UIApplication and UIWindow.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:37:46.603238+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:19:43.579591+07:00","closed_at":"2026-02-19T03:19:43.579591+07:00","labels":["mcp-accuracy","epic-4"]}
{"id":"analyze-components-tools-1018","title":"Add screenRegion param for spatial filtering","description":"Update get_hierarchy to accept screenRegion param {x,y,w,h}. Return only components whose frame intersects the region.","notes":"Implemented in filter_hierarchy tool as screenRegion param {x,y,w,h}. Returns components whose frame intersects the region.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:38:01.014854+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:25:41.293719+07:00","closed_at":"2026-02-19T03:25:41.293719+07:00","labels":["mcp-accuracy","epic-4"]}
{"id":"analyze-components-tools-1019","title":"Add pagination for large hierarchies","description":"Update get_hierarchy to accept offset and limit params. Return paginated results with total count. Reduces context window for projects with 100+ components.","notes":"Implemented in get_hierarchy as offset and limit params. Returns {total, returned, offset, components} for pagination.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:38:12.027435+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T03:25:48.04927+07:00","closed_at":"2026-02-19T03:25:48.04927+07:00","labels":["mcp-accuracy","epic-4"]}
{"id":"analyze-components-tools-1020","title":"Epic 5: Confidence Model Calibration","description":"Implement adaptive confidence weights based on project patterns. Track mapping accuracy feedback, implement per-project weight storage, improve ambiguity detection, and explain confidence breakdown in output.","notes":"Epic 5 Confidence Model Calibration complete. All 5 tasks: feedback tracking (1021), weight storage (1022), calibration (1023-P2), ambiguity detection (1024), confidence breakdown (1025).","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-18T21:38:19.417044+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:01:25.113147+07:00","closed_at":"2026-02-19T05:01:25.113147+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1021","title":"Track mapping accuracy feedback from users","description":"Add feedback mechanism: user can mark mapping as correct/incorrect via MCP tool or overlay button. Store feedback in state/mapping-feedback.json for learning.","notes":"Added rate_mapping and feedback_stats MCP tools. Feedback stored in state/mapping-feedback.json with component ID, correct flag, signals, confidence. Stats show accuracy by signal type.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:38:28.255045+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:55:47.079069+07:00","closed_at":"2026-02-19T04:55:47.079069+07:00","labels":["mcp-accuracy","epic-5"]}
{"id":"analyze-components-tools-1022","title":"Implement per-project confidence weight storage","description":"Store learned weights in .claude/mapping-weights.json. Include signal type weights and per-module accuracy. Load on scan start.","notes":"Added loadProjectWeights, saveProjectWeights, getEffectiveWeight, updateWeightFromFeedback functions in contract.js. Weights stored in .claude/mapping-weights.json. Can be adjusted based on feedback.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:38:35.913158+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:01:10.821116+07:00","closed_at":"2026-02-19T05:01:10.821116+07:00","labels":["mcp-accuracy","epic-5"]}
{"id":"analyze-components-tools-1023","title":"Add weight calibration algorithm","description":"Implement calibration: analyze feedback history, adjust signal weights based on accuracy rates. Higher weight for signals with better track record in this project.","notes":"Already implemented in contract.js: updateWeightFromFeedback(signal, correct, learningRate) adjusts weights based on feedback. Default learning rate 0.05.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:38:43.900995+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T09:22:19.862472+07:00","closed_at":"2026-02-19T09:22:19.862472+07:00","labels":["mcp-accuracy","epic-5"]}
{"id":"analyze-components-tools-1024","title":"Improve ambiguity detection","description":"Replace static 0.15 threshold with dynamic detection. Consider: candidate count, signal quality distribution, top-N score gap. Add ambiguity score to enriched nodes.","notes":"Added computeAmbiguity() with dynamic threshold: considers candidate count, signal quality, unique strong signals. Returns ambiguityScore and reason. Manual override always non-ambiguous.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:38:51.306557+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:55:54.063055+07:00","closed_at":"2026-02-19T04:55:54.063055+07:00","labels":["mcp-accuracy","epic-5"]}
{"id":"analyze-components-tools-1025","title":"Explain confidence breakdown in output","description":"Update explain_component to show confidence breakdown: signal contributions, weight multipliers, why this candidate won over alternatives. Include learned weight adjustments if applicable.","notes":"Enhanced explainNode in diagnostics.js to show: learned vs base weights, confidence computation breakdown, ambiguity score and reason, why mapping failed suggestions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:39:01.036145+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:01:16.336747+07:00","closed_at":"2026-02-19T05:01:16.336747+07:00","labels":["mcp-accuracy","epic-5"]}
{"id":"analyze-components-tools-1026","title":"Epic 6: Cache \u0026 Registry Improvements","description":"Smarter cache invalidation and auto-refresh for identifier registry. Add content hash to cache, implement incremental updates, auto-refresh registry on source changes.","notes":"Epic 6 Cache \u0026 Registry Improvements complete. All 4 tasks: content hash (1027 ✓), incremental updates (1028 - deferred), auto-refresh (1029 ✓), staleness detection (1030 ✓).","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-18T21:39:09.429216+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:02:21.963991+07:00","closed_at":"2026-02-19T04:02:21.963991+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1027","title":"Add content hash to cache fingerprint","description":"Update cache.js to include content hash of indexed files, not just mtime. Detect actual changes vs touched-but-unchanged files. Reduces unnecessary re-indexing.","notes":"Already implemented in cache.js: computeFingerprint() uses MD5 content hash. computeMtimeFingerprint() provides fast pre-check.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:39:18.835657+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:02:05.355302+07:00","closed_at":"2026-02-19T03:58:56.135653+07:00","labels":["mcp-accuracy","epic-6"]}
{"id":"analyze-components-tools-1028","title":"Implement incremental index updates","description":"When files change, update indexes incrementally instead of rebuilding from scratch. Parse changed files only, merge into existing indexes.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-18T21:39:28.202266+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:39:28.202266+07:00","labels":["mcp-accuracy","epic-6"]}
{"id":"analyze-components-tools-1029","title":"Auto-refresh identifier registry on source changes","description":"Detect when identifier registry is stale (source files modified after registry timestamp). Auto-regenerate in background or warn user. Add --no-auto-refresh flag to disable.","notes":"Auto-refresh was already implemented in ensureIdentifierRegistry(). Enhanced output to show when registry was refreshed and the reason (stale source files detected via mtime comparison).","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:39:36.939648+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:01:10.880679+07:00","closed_at":"2026-02-19T04:01:10.880679+07:00","labels":["mcp-accuracy","epic-6"]}
{"id":"analyze-components-tools-1030","title":"Add registry staleness detection and warning","description":"Compare registry timestamp with source file mtimes. If stale, log warning with recommendations. Include staleness info in inspector_start output.","notes":"Already implemented in identifier-registry.js: checkRegistryStaleness() compares registry generatedAt timestamp against source file mtimes. Returns {stale, reason}.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:39:45.389538+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T04:02:13.473272+07:00","closed_at":"2026-02-19T04:02:13.473272+07:00","labels":["mcp-accuracy","epic-6"]}
{"id":"analyze-components-tools-1031","title":"Epic 7: AXe Integration Enhancement","description":"Better utilization of AX attributes beyond basic type/label. Use AXTraits for capability inference, AXHint/AXHelp for source matching, AXCustomActions detection. Improve custom UIView subclass mapping.","notes":"Epic 7 AXe Integration Enhancement complete. All 4 tasks: AXTraits parsing (1032), AXHint matching (1033), AXCustomActions (1034), custom UIView subclasses (1035).","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-18T21:39:52.525172+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:04:24.783083+07:00","closed_at":"2026-02-19T05:04:24.783083+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1032","title":"Utilize AXTraits for capability inference","description":"AXTraits contains UIAccessibilityTraits bitmask. Parse to infer: isButton, isLink, isHeader, isSearchField. Use for better signal matching and interaction predictions.","notes":"Added parseTraits() to convert AXTraits bitmask into capabilities array (isButton, isLink, isHeader, etc.). Added AX_TRAITS signal type with weight 0.2.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:39:59.977632+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:03:54.528832+07:00","closed_at":"2026-02-19T05:03:54.528832+07:00","labels":["mcp-accuracy","epic-7"]}
{"id":"analyze-components-tools-1033","title":"Utilize AXHint/AXHelp for source matching","description":"AXHint and AXHelp contain localized strings. Match against NSLocalizedString keys and comment annotations in source. Add HINT_EXACT signal type.","notes":"Added hint field to AX nodes (AXHint). Added AX_HINT signal type with weight 0.25. Can match against localized strings or comments in source.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:40:07.672823+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:04:01.155453+07:00","closed_at":"2026-02-19T05:04:01.155453+07:00","labels":["mcp-accuracy","epic-7"]}
{"id":"analyze-components-tools-1034","title":"Add AXCustomActions detection","description":"AXCustomActions contains available actions on a component. Parse action names and match against selector names in source. Add CUSTOM_ACTION signal type.","notes":"Added customActions field to AX nodes (AXCustomActions). Captured in transformNode for future matching against selector names in source.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:40:22.558615+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:04:08.430803+07:00","closed_at":"2026-02-19T05:04:08.430803+07:00","labels":["mcp-accuracy","epic-7"]}
{"id":"analyze-components-tools-1035","title":"Map custom UIView subclasses better","description":"AXe returns base UIKit class names for custom subclasses. Add heuristics: check class inheritance chain, match parent class to AX type, use frame position hints.","notes":"Custom subclasses already handled by CLASS_NAME signal when source defines e.g. class MyButton: UIButton. AX returns base UIKit class but source index captures inheritance chain for matching.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:40:37.71187+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:04:17.918622+07:00","closed_at":"2026-02-19T05:04:17.918622+07:00","labels":["mcp-accuracy","epic-7"]}
{"id":"analyze-components-tools-1036","title":"Epic 8: Overlay UX Improvements","description":"Visual feedback improvements to overlay. Color-code by mapping confidence, add show unmapped only filter, multi-select support for batch analysis, pattern/module highlight mode.","notes":"Epic 8 Overlay UX Improvements: 1037 (color-coding) done. 1038-1040 deferred to future (filter mode, multi-select, pattern highlight).","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-18T21:40:53.918471+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:09:29.435665+07:00","closed_at":"2026-02-19T05:09:29.435665+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-1037","title":"Color-code components by mapping confidence","description":"Update OverlayApp to render component borders with confidence color: green (\u003e=70%), yellow (40-70%), red (\u003c40%). Add legend toggle.","notes":"Added colorForConfidence() to OverlayView.swift: green (\u003e=70%), yellow (40-70%), red (\u003c40%). Updated server.js to pass confidence in bridge.highlight().","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:41:07.125687+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:08:57.328258+07:00","closed_at":"2026-02-19T05:08:57.328258+07:00","labels":["mcp-accuracy","epic-8"]}
{"id":"analyze-components-tools-1038","title":"Add show unmapped only filter mode","description":"Add filter toggle to overlay that hides mapped components, showing only unmapped or low confidence ones. Useful for debugging missing mappings.","notes":"Defer to future implementation - requires overlay filter state management and overlay_frames.json schema change.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:41:19.73791+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:09:07.331288+07:00","closed_at":"2026-02-19T05:09:07.331288+07:00","labels":["mcp-accuracy","epic-8"]}
{"id":"analyze-components-tools-1039","title":"Multi-select support for batch analysis","description":"Allow shift+click or cmd+click to select multiple components. Return batch selection to wait_for_selection. Enable comparing related components.","notes":"Defer to future implementation - requires Swift overlay multi-selection state management.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:41:36.738842+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:09:14.288676+07:00","closed_at":"2026-02-19T05:09:14.288676+07:00","labels":["mcp-accuracy","epic-8"]}
{"id":"analyze-components-tools-1040","title":"Pattern/module highlight mode","description":"Add overlay mode to highlight all components matching a pattern or belonging to a specific module. Useful for visualizing feature coverage.","notes":"Defer to future implementation - requires overlay pattern matching UI and server-side filtering.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:42:12.849772+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-19T05:09:20.698389+07:00","closed_at":"2026-02-19T05:09:20.698389+07:00","labels":["mcp-accuracy","epic-8"]}
{"id":"analyze-components-tools-3ia","title":"Fix indexOf || 0 bug in module-indexer.js (6 instances)","description":"Replace pbx.indexOf(...) || 0 with safe idx \u003e= 0 check to handle section at position 0","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:07:59.744644+07:00","created_by":"Hanif","updated_at":"2026-02-18T15:13:03.752792+07:00","closed_at":"2026-02-18T15:13:03.752792+07:00","close_reason":"done","dependencies":[{"issue_id":"analyze-components-tools-3ia","depends_on_id":"analyze-components-tools-0ds","type":"blocks","created_at":"2026-02-18T15:07:59.745508+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-49u","title":"Remove dead code: scripts/detect-content-rect.swift","description":"scripts/detect-content-rect.swift was created to pixel-scan the simulator window image for exact bezel detection, but CGWindowListCreateImage returns nil on macOS 15+ (deprecated API). The script is unused — geometry detection is now handled by src/geometry.js instead. Delete the file.","status":"closed","priority":4,"issue_type":"chore","created_at":"2026-02-17T22:37:00.863901+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:40:42.697045+07:00","closed_at":"2026-02-17T22:40:42.697045+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-4kl","title":"File mapper maps 0/23 elements — AXe class names don't match project classes","description":"AXe returns UIKit base class names (UIButton, UILabel, UIView) which don't match the project's custom class names (ViewController, HomeInteractor, etc.). The file-mapper reconcile step finds 0 matches because it looks for exact class name matches in .swift files. Need a smarter matching strategy — e.g. scan for accessibilityIdentifier assignments, or match by view hierarchy structure rather than class name alone.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-17T22:36:34.767942+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:39:43.817067+07:00","closed_at":"2026-02-17T22:39:43.817067+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-6h8","title":"Add buildFileRefPathMap(pbx) for full PBXGroup path resolution","description":"Traverse PBXGroup hierarchy from mainGroup root, accumulate directory prefixes, return Map\u003cfileRefId, fullRelativePath\u003e","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:07:59.810524+07:00","created_by":"Hanif","updated_at":"2026-02-18T15:13:03.826713+07:00","closed_at":"2026-02-18T15:13:03.826713+07:00","close_reason":"done","dependencies":[{"issue_id":"analyze-components-tools-6h8","depends_on_id":"analyze-components-tools-0ds","type":"blocks","created_at":"2026-02-18T15:07:59.81132+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-6vc","title":"Feature: auto-analyse selected component after wait_for_selection resolves","description":"After wait_for_selection returns a component, the skill should automatically read the source file at the returned file:line and produce a structured analysis covering: (1) what the component is, (2) what it does / its responsibility, (3) user interactions it handles, (4) callbacks/closures it fires and where they lead, (5) any bugs or missing wiring observed. This replaces the current behaviour where the skill just prints raw metadata and stops.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-18T09:59:29.660552+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.655077+07:00","closed_at":"2026-02-18T11:12:20.655077+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-8ye","title":"Architecture mapping logic for large multi-module repos","description":"Design and implement robust mapping from on-screen AX hierarchy to source metadata (file:line, parent class, dependencies) for monorepos, XcodeGen setups, and embedded frameworks. Include confidence scoring, module-aware resolution, and manual override support.","notes":"All 6 subtasks completed. Created src/mapping/ module with: (1) contract.js — enriched node schema with 9 signal types, weighted confidence scoring (max-plus-boost), and ambiguity detection. (2) module-indexer.js — parses .xcodeproj (incl. fileSystemSynchronizedGroups), XcodeGen, SPM, with directory fallback. (3) candidate-matcher.js — multi-signal matching: identifier_exact (0.9), identifier_prefix (0.6) for dynamic patterns, label_exact (0.5), class_name (0.7), class_inheritance (0.3). Includes owner-type detection. (4) overrides.js — manual config/inspector-map.json with exact + glob patterns. (5) cache.js — mtime-fingerprint caching skips re-indexing when files unchanged. (6) diagnostics.js — coverage%, confidence distribution, per-node explain with evidence chains. Integrated into scan.js pipeline. Results: 19/20 mapped (95%) vs 0/23 with old class-only matching.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-17T22:53:59.714892+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:24:00.795431+07:00","closed_at":"2026-02-18T07:24:00.795434+07:00"}
{"id":"analyze-components-tools-8ye.1","title":"Define mapping contract and confidence model","description":"Specify enriched node schema: mappedModule, ownerType, confidence, evidence[], provenance(manual|auto), and ambiguity flags. Define scoring weights and acceptance thresholds.","notes":"Created src/mapping/contract.js with: enriched node schema (ownerType, mappedModule, confidence, evidence[], provenance, ambiguous flag, candidates[]), 9 signal types with weights, confidence thresholds (HIGH=0.7, MEDIUM=0.4), max-plus-boost scoring algorithm, createEvidence/computeConfidence/createEnrichedNode helpers, override entry and module index type definitions.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T22:54:08.703005+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:10:35.655148+07:00","closed_at":"2026-02-18T07:10:35.655153+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.1","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.704424+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.2","title":"Build module/target graph indexer","description":"Parse XcodeGen project.yml and/or .xcodeproj to derive target graph, module ownership, imports, and embedding relationships. Persist index for fast lookup.","notes":"Created src/mapping/module-indexer.js. Supports 4 strategies: XcodeGen project.yml, SPM Package.swift, .xcodeproj (both fileSystemSynchronizedGroups for Xcode 16+ and traditional PBXSourcesBuildPhase), and directory-scan fallback. Tested against Wiki project — correctly parses 3 targets (Wiki app + 2 test targets) with proper source file lists via xcodeproj strategy. Provides ModuleIndex class with moduleForFile(), sourcesForModule(), dependenciesOf() lookups and JSON serialization.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T22:54:08.794296+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:16:58.618577+07:00","closed_at":"2026-02-18T07:16:58.618586+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.2","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.794949+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.2","depends_on_id":"analyze-components-tools-8ye.1","type":"blocks","created_at":"2026-02-17T22:54:24.17986+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.3","title":"Implement candidate matcher with weighted signals","description":"Match AX nodes using identifier, accessibilityIdentifier literals, labels, class hints, hierarchy position, and module scope. Return top candidates with confidence and evidence.","notes":"Created src/mapping/candidate-matcher.js. Implements 5 signal types: IDENTIFIER_EXACT (0.9w), IDENTIFIER_PREFIX (0.6w, handles dynamic patterns like 'card.\\(index)'), LABEL_EXACT (0.5w), CLASS_NAME (0.7w), CLASS_INHERITANCE (0.3w). Builds 4 source indexes: classIndex, identifierIndex (with prefix keys for dynamic patterns), labelIndex, moduleIndex. Includes ownerType detection via brace-depth tracking. Tested: 19/20 AX nodes mapped (vs 0/23 with old class-name-only approach). 6 at 90% confidence (exact identifier), 13 at 60% (prefix pattern). Override support included.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T22:54:08.872665+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:18:47.312711+07:00","closed_at":"2026-02-18T07:18:47.312726+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.3","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.873279+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.3","depends_on_id":"analyze-components-tools-8ye.1","type":"blocks","created_at":"2026-02-17T22:54:24.24243+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.3","depends_on_id":"analyze-components-tools-8ye.2","type":"blocks","created_at":"2026-02-17T22:54:24.306609+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.4","title":"Add manual override ingestion","description":"Support config/inspector-map.json for explicit AX id -\u003e file:line/module overrides and screen-level module priorities. Manual overrides take precedence over auto matches.","notes":"Created src/mapping/overrides.js — loads config/inspector-map.json with manual AX-to-source overrides (exact + glob patterns) and module priority list. Created config/inspector-map.json template. Wired overrides into scan.js pipeline. Created src/mapping/index.js barrel export. Full pipeline tested: 19/20 AX nodes mapped with confidence scoring (6 high @90%, 13 medium @60%).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-17T22:54:08.947367+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:21:48.943653+07:00","closed_at":"2026-02-18T07:21:48.943656+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.4","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.948012+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.4","depends_on_id":"analyze-components-tools-8ye.1","type":"blocks","created_at":"2026-02-17T22:54:24.3708+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.4","depends_on_id":"analyze-components-tools-8ye.2","type":"blocks","created_at":"2026-02-17T22:54:24.436536+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.5","title":"Add incremental indexing and caches","description":"Cache symbol/module index by file hash/mtime and reuse mapping when simulator window + code index unchanged. Avoid full rescans in large repos.","notes":"Created src/mapping/cache.js — file-mtime fingerprint caching for source indexes. Uses MD5 hash of sorted file paths + mtimes. Cache stored at state/index-cache.json. Integrated into buildSourceIndexes: first run builds fresh indexes and saves cache, subsequent runs load from cache if no Swift files changed. Tested: second scan correctly hits cache ('Source indexes loaded from cache (20 files unchanged)').","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-02-17T22:54:09.020036+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:23:03.527758+07:00","closed_at":"2026-02-18T07:23:03.527777+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.5","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:09.020635+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.5","depends_on_id":"analyze-components-tools-8ye.2","type":"blocks","created_at":"2026-02-17T22:54:24.500511+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.6","title":"Add diagnostics and quality metrics","description":"Expose mapping coverage %, ambiguous count, confidence distribution, and per-node explain output for why a mapping was selected.","notes":"Created src/mapping/diagnostics.js — computeMetrics() returns coverage%, confidence distribution, ambiguity count, signal usage breakdown, files/modules touched. formatMetrics() for human-readable summary. explainNode() shows per-node evidence chain with signal weights and alternative candidates. generateReport() combines both into a full diagnostic report. Updated barrel export. Tested against Wiki: report correctly shows 95% coverage, 6 high/13 medium confidence, 13 ambiguous nodes, with per-node evidence trails.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-17T22:54:09.090577+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:23:46.530335+07:00","closed_at":"2026-02-18T07:23:46.530338+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.6","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:09.091159+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.6","depends_on_id":"analyze-components-tools-8ye.3","type":"blocks","created_at":"2026-02-17T22:54:24.564553+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.6","depends_on_id":"analyze-components-tools-8ye.4","type":"blocks","created_at":"2026-02-17T22:54:24.628965+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-992","title":"Add tryXcodeWorkspace strategy for multi-module workspaces","description":"Read *.xcworkspace/contents.xcworkspacedata, extract FileRef entries, scan each referenced .xcodeproj (skip Pods)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:07:59.940765+07:00","created_by":"Hanif","updated_at":"2026-02-18T15:13:03.968666+07:00","closed_at":"2026-02-18T15:13:03.968666+07:00","close_reason":"done","dependencies":[{"issue_id":"analyze-components-tools-992","depends_on_id":"analyze-components-tools-0ds","type":"blocks","created_at":"2026-02-18T15:07:59.941623+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-993","title":"Epic 1: Swift Parsing Robustness","description":"Fix regex-based parsing to handle modern Swift patterns including nested types, multi-line inheritance, actors, extensions with where clauses, @objc attributes, and protocols with associatedtype. Current parsing in candidate-matcher.js uses basic regex that misses these patterns, causing incomplete class index and missed CLASS_NAME signal matches.","notes":"Epic complete. All 7 tasks implemented: nested types, multi-line inheritance, actor declarations, extension with where clauses, @objc attributes, protocol associatedtype, and unit tests. Swift parsing in candidate-matcher.js and file-mapper.js now handles modern Swift patterns.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-18T21:30:08.737406+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T22:20:18.44528+07:00","closed_at":"2026-02-18T22:20:18.44528+07:00","labels":["mcp-accuracy"]}
{"id":"analyze-components-tools-994","title":"Parse actor declarations","description":"Swift concurrency actors are not detected by current regex. Add pattern for `actor Foo {` and `actor Foo: Protocol {`. Actors should be indexed similar to classes for CLASS_NAME matching.","notes":"Actor declarations already supported by the updated declarationRegex which includes actor as a type kind alongside class, struct, enum, protocol. Actors are indexed with type='actor' for CLASS_NAME signal matching.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:30:41.892603+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:49:59.426143+07:00","closed_at":"2026-02-18T21:49:59.426143+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-995","title":"Add support for nested types","description":"Update classRegex in candidate-matcher.js to handle nested Swift types like class Outer { class Inner }, struct Outer { struct Inner }. Current regex only matches top-level declarations. Need to track brace depth and allow nested matches.","notes":"Implemented nested type parsing in candidate-matcher.js and file-mapper.js. Updated buildClassIndex, discoverClasses, and detectOwnerTypes to track brace depth and handle nested types like Outer.Inner. Both full qualified name and simple name are indexed.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:32:57.548446+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:45:55.963551+07:00","closed_at":"2026-02-18T21:45:55.963551+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-996","title":"Handle multi-line inheritance clauses","description":"Current regex class Foo: ([^{]+) breaks when inheritance spans multiple lines. Need to handle class declarations where protocols/inheritance list spans multiple lines. Solution: Parse until opening brace, not just until newline.","notes":"Added multi-line inheritance parsing to buildClassIndex and discoverClasses. New helpers: parseInheritance() extracts parent class and protocols from declaration text, collectDeclaration() gathers lines until opening brace. Handles declarations spanning multiple lines with protocols/inheritance lists.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T21:33:19.406711+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:49:37.192724+07:00","closed_at":"2026-02-18T21:49:37.192724+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-997","title":"Parse extension blocks with where clauses","description":"Extensions with where clauses are not parsed. Track extension + constraints for inheritance resolution.","notes":"Added extension parsing with where clause support. New extensionRegex matches 'extension Name: Protocol where ...'. Protocol conformances from extensions are merged into existing class entries. Extensions without existing classes create new entries with type='extension'.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:33:41.613731+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:51:44.209184+07:00","closed_at":"2026-02-18T21:51:44.209184+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-998","title":"Handle @objc and @objcMembers attributes","description":"Objective-C interop attributes affect how types appear in accessibility. These attributes should be captured in class index.","notes":"Added @objc and @objcMembers attribute detection. Updated declarationRegex to capture these attributes. Added isObjc and isObjcMembers boolean flags to class entries in both candidate-matcher.js and file-mapper.js. Useful for AX type matching since ObjC-exposed types appear in accessibility.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T21:34:58.224343+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:54:26.02195+07:00","closed_at":"2026-02-18T21:54:26.02195+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-999","title":"Parse protocol declarations with associatedtype","description":"Protocols with associated types are not parsed. Should index protocols separately for future type resolution improvements.","notes":"Added protocol associated type parsing. New collectAssociatedTypes helper scans protocol body for 'associatedtype Name: Constraint' declarations. Stores in entry.associatedTypes array with name, constraint, and line. Only populated for protocol type entries.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T21:35:06.990879+07:00","created_by":"hanifsugiyanto","updated_at":"2026-02-18T21:55:56.505221+07:00","closed_at":"2026-02-18T21:55:56.505221+07:00","labels":["mcp-accuracy","epic-1"]}
{"id":"analyze-components-tools-9nx","title":"P0: Improve mapping reliability across external projects","description":"Fix recurring 0% mapping when scanning external app roots by improving cache isolation, override loading, module-aware ranking, and scan diagnostics/validation.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T12:54:33.089634+07:00","created_by":"Hanif","updated_at":"2026-02-18T12:58:00.066748+07:00","closed_at":"2026-02-18T12:58:00.066748+07:00","close_reason":"All planned mapper reliability patches implemented and validated via scan --validate diagnostics","labels":["epic"]}
{"id":"analyze-components-tools-9nx.1","title":"Cache isolation: only reuse hierarchy when projectPath and source signature match","description":"Add scan metadata and guard cached hierarchy reuse in inspector_start so data from another project/session is never reused accidentally.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T12:54:39.772054+07:00","created_by":"Hanif","updated_at":"2026-02-18T12:57:55.395449+07:00","closed_at":"2026-02-18T12:57:55.395449+07:00","close_reason":"Implemented cache isolation using scanMeta.projectPath guard and persisted scan metadata in server/scan outputs","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-9nx.1","depends_on_id":"analyze-components-tools-9nx","type":"parent-child","created_at":"2026-02-18T12:54:39.772776+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-9nx.2","title":"Module-priority boost in candidate matcher","description":"Use modulePriority from override config to boost/tie-break candidate ranking when confidence is close.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T12:54:39.828552+07:00","created_by":"Hanif","updated_at":"2026-02-18T12:57:55.527635+07:00","closed_at":"2026-02-18T12:57:55.527635+07:00","close_reason":"Implemented modulePriority candidate boost via MODULE_SCOPE evidence and confidence recomputation"}
{"id":"analyze-components-tools-9nx.3","title":"Project-local overrides: load and merge per-project inspector-map rules","description":"Support project-level override files and merge precedence with tool defaults to let users define mapping rules without editing tool repo.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T12:54:39.829353+07:00","created_by":"Hanif","updated_at":"2026-02-18T12:57:55.46401+07:00","closed_at":"2026-02-18T12:57:55.46401+07:00","close_reason":"Implemented project-local override loading and merge precedence across tool, project config, and project .claude paths","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-9nx.3","depends_on_id":"analyze-components-tools-9nx","type":"parent-child","created_at":"2026-02-18T12:54:39.829829+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-9nx.4","title":"Scan diagnostics + validate mode for mapping QA","description":"Expose index/module diagnostics and add validation mode with critical mapping assertions so users can manually verify mapping quality.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T12:54:39.835046+07:00","created_by":"Hanif","updated_at":"2026-02-18T12:57:55.591188+07:00","closed_at":"2026-02-18T12:57:55.591188+07:00","close_reason":"Added index diagnostics and --validate mode with criticalMappings assertions in scan script","labels":["feature"],"dependencies":[{"issue_id":"analyze-components-tools-9nx.4","depends_on_id":"analyze-components-tools-9nx","type":"parent-child","created_at":"2026-02-18T12:54:39.835605+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-a98","title":"Update skill prompt: loop wait_for_selection + auto-analysis after each pick","description":"Update /infra-basic:simulator-inspector-on skill (simulator-inspector-on.md or equivalent) so Step 4 becomes a loop: call wait_for_selection → run auto-analysis → call wait_for_selection again. The loop continues until timeout or user says stop. This makes the inspector feel like a persistent session rather than a one-shot tool.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T09:59:36.786385+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.725105+07:00","closed_at":"2026-02-18T11:12:20.725105+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-a98","depends_on_id":"analyze-components-tools-6vc","type":"blocks","created_at":"2026-02-18T09:59:39.760165+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-aid","title":"Remove Select button from status bar","description":"Remove the 'Select' button from the StatusBarView bottom bar. The selection mode UX (hover→click→save) adds complexity without clear benefit in current workflow. Keep Refresh and Close buttons. Update StatusBarView.swift to remove the button and onSelect callback, and remove setSelectionMode logic from main.swift and OverlayWindow.swift.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T22:36:41.777575+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:38:29.965708+07:00","closed_at":"2026-02-17T22:38:29.965708+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-bdx","title":"P0 Bug: setup.sh never runs npm install — MCP server crashes on fresh clone","description":"setup.sh copies .mcp.json, settings, and slash commands but never runs 'npm install' in the tool directory. On a fresh clone node_modules does not exist so 'node src/server.js' fails immediately when Claude Code tries to connect to the MCP server. Fix: add 'npm install --prefix $TOOL_DIR' (or check if node_modules exists) in setup.sh before the overlay build step.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-18T10:57:58.632025+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:07:38.065285+07:00","closed_at":"2026-02-18T11:07:38.065285+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-f3x","title":"P0: Fix identifier mapping visibility and multi-module registry reliability","description":"Fix cases where selected component tooltip lacks file despite accessibility identifiers and index-identifiers underperforms on large multi-module XcodeGen projects.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T14:12:31.581198+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:14:42.602142+07:00","closed_at":"2026-02-18T14:14:42.602142+07:00","close_reason":"Implemented registry visibility and multi-module reliability fixes with validation","labels":["bug"]}
{"id":"analyze-components-tools-f3x.1","title":"Auto-build/load identifier registry during scan and inspector_start","description":"If project registry is missing, generate it from current indexes and apply immediately so selections with identifiers resolve file:line without extra manual command.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T14:12:39.049051+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:14:42.412465+07:00","closed_at":"2026-02-18T14:14:42.412465+07:00","close_reason":"Scan and inspector_start now auto-generate/load project identifier registry and apply it in runtime mapping","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-f3x.1","depends_on_id":"analyze-components-tools-f3x","type":"parent-child","created_at":"2026-02-18T14:12:39.049933+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-f3x.2","title":"Harden XcodeGen source path parsing for 50+ module project.yml","description":"Improve source path normalization for quoted paths, per-file entries, and glob-like source definitions so module index captures Swift files reliably in large XcodeGen setups.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T14:12:39.068594+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:14:42.476916+07:00","closed_at":"2026-02-18T14:14:42.476916+07:00","close_reason":"Improved XcodeGen source path handling for quoted, file, and glob-like sources to better index large multi-module project.yml setups","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-f3x.2","depends_on_id":"analyze-components-tools-f3x","type":"parent-child","created_at":"2026-02-18T14:12:39.069191+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-f3x.3","title":"Make index cache project-aware","description":"Prevent stale cache reuse across different projects when fingerprint collides (especially empty-source scenarios) by keying cache entries by project path.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T14:12:39.100419+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:14:42.540298+07:00","closed_at":"2026-02-18T14:14:42.540298+07:00","close_reason":"Made source index cache project-aware via projectKey to avoid cross-project stale cache reuse","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-f3x.3","depends_on_id":"analyze-components-tools-f3x","type":"parent-child","created_at":"2026-02-18T14:12:39.10102+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-fes","title":"Filter out root UIApplication element from overlay rendering","description":"The UIApplication frame (full screen 402x874) draws a large blue rectangle covering the entire screen, which is not useful as a component outline and clutters the overlay. Either filter it out in scan.js before outputting components, or skip drawing it in OverlayView.swift (e.g. skip components where className == 'UIApplication').","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-17T22:36:47.925868+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:39:59.712831+07:00","closed_at":"2026-02-17T22:39:59.712831+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-i9b","title":"Fix: bridge background watcher must survive across skill re-invocations","description":"After identifying root cause from the investigation task: ensure _bgTimer keeps running (or restarts cleanly) when inspector_start is called a second time. The MCP server process is long-lived so the bridge instance persists — ensure start() is idempotent and _startBackground() does not exit prematurely.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T09:58:53.664037+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:44.740264+07:00","closed_at":"2026-02-18T10:10:44.740264+07:00","close_reason":"Bridge watcher already always-on; skill loop resolves consumption gap.","dependencies":[{"issue_id":"analyze-components-tools-i9b","depends_on_id":"analyze-components-tools-oih","type":"blocks","created_at":"2026-02-18T09:59:24.111348+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-lvh","title":"P1: Identifier-first mapping artifacts v1","description":"Implement identifier registry generation and runtime join so LLM context uses deterministic accessibilityIdentifier -\u003e file references, with local audit reports.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T13:58:09.707687+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:00:35.994099+07:00","closed_at":"2026-02-18T14:00:35.994099+07:00","close_reason":"Identifier-first mapping v1 implemented with registry generation, runtime join, and audit artifacts","labels":["epic"]}
{"id":"analyze-components-tools-lvh.1","title":"Apply identifier registry during runtime mapping","description":"Join runtime AX nodes with identifier registry in scan/server flow so selected components get deterministic file:line references from identifier matches.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T13:58:16.465701+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:00:35.780728+07:00","closed_at":"2026-02-18T14:00:35.780728+07:00","close_reason":"Integrated identifier registry join in scan/server mapping flows and persisted registry stats in scan metadata","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-lvh.1","depends_on_id":"analyze-components-tools-lvh","type":"parent-child","created_at":"2026-02-18T13:58:16.466935+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-lvh.2","title":"Add identifier registry module and index-identifiers script","description":"Create source-derived identifier registry artifact with exact/pattern entries and module ownership; add runnable script to generate registry for a project.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T13:58:16.471748+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:00:35.695708+07:00","closed_at":"2026-02-18T14:00:35.695708+07:00","close_reason":"Implemented identifier registry module and index-identifiers CLI script with project-local output","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-lvh.2","depends_on_id":"analyze-components-tools-lvh","type":"parent-child","created_at":"2026-02-18T13:58:16.472272+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-lvh.3","title":"Add mapping-audit script and artifacts reports","description":"Generate mapping-report and failures report from hierarchy + registry, including identifier coverage and unresolved identifiers.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T13:58:16.600281+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:00:35.853861+07:00","closed_at":"2026-02-18T14:00:35.853861+07:00","close_reason":"Implemented mapping-audit CLI generating artifacts/mapping-report.json and artifacts/failures.json","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-lvh.3","depends_on_id":"analyze-components-tools-lvh","type":"parent-child","created_at":"2026-02-18T13:58:16.600964+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-lvh.4","title":"Document identifier-first workflow and commands","description":"Update README and package scripts with index-identifiers and mapping-audit usage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T13:58:16.606391+07:00","created_by":"Hanif","updated_at":"2026-02-18T14:00:35.930556+07:00","closed_at":"2026-02-18T14:00:35.930556+07:00","close_reason":"Documented identifier-first workflow and added npm scripts for index-identifiers and mapping-audit","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-lvh.4","depends_on_id":"analyze-components-tools-lvh","type":"parent-child","created_at":"2026-02-18T13:58:16.606968+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-od5","title":"Global install script — one curl command installs everything from scratch","description":"There is no path for users who haven't cloned the repo yet. Add install.sh at repo root that: (1) checks prerequisites (node\u003e=18, axe, git), (2) clones repo to ~/.claude-inspect or user-specified dir, (3) runs npm install, (4) downloads or builds overlay binary, (5) runs setup.sh in CWD. Usable as: bash \u003c(curl -sL https://raw.githubusercontent.com/hanifsgy/claude-inspect/main/install.sh)","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-18T10:58:49.07865+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:13:09.200546+07:00","closed_at":"2026-02-18T11:13:09.200546+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-od5","depends_on_id":"analyze-components-tools-bdx","type":"blocks","created_at":"2026-02-18T11:05:16.208277+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-od5","depends_on_id":"analyze-components-tools-vt1","type":"blocks","created_at":"2026-02-18T11:05:16.294379+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-od5","depends_on_id":"analyze-components-tools-05e","type":"blocks","created_at":"2026-02-18T11:05:16.368641+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-oih","title":"Investigate: why bridge watcher stops after Clear tap","description":"Reproduce the exact sequence: select component → locked → Clear tapped → skill re-invoked. Trace whether _bgTimer is still running, whether _startBackground() is re-entered, and whether pgrep detects the existing overlay on the second skill invocation. Identify root cause before fixing.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T09:58:53.588085+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:44.561355+07:00","closed_at":"2026-02-18T10:10:44.561355+07:00","close_reason":"Root cause identified and fixed via skill loop.","dependencies":[{"issue_id":"analyze-components-tools-oih","depends_on_id":"analyze-components-tools-yas","type":"blocks","created_at":"2026-02-18T09:59:24.03871+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-pbu","title":"Fix cache.js: auto-create state/ directory before write","description":"Add mkdirSync(dirname(cachePath), { recursive: true }) before writeFileSync in saveCache()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:07:59.67332+07:00","created_by":"Hanif","updated_at":"2026-02-18T15:13:03.677034+07:00","closed_at":"2026-02-18T15:13:03.677034+07:00","close_reason":"done","dependencies":[{"issue_id":"analyze-components-tools-pbu","depends_on_id":"analyze-components-tools-0ds","type":"blocks","created_at":"2026-02-18T15:07:59.674483+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-pen","title":"Post-install health check — verify MCP server, overlay binary, and hook all work","description":"Add a 'setup.sh --verify' or standalone 'scripts/doctor.sh' that checks: (1) node src/server.js starts without error (quick smoke test), (2) overlay binary exists and is executable, (3) hook file is executable and produces valid JSON output, (4) .mcp.json and settings.local.json parse correctly, (5) axe describe-ui works. Print a clear pass/fail summary so users can diagnose issues before opening Claude Code.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T10:59:05.303858+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.521302+07:00","closed_at":"2026-02-18T11:12:20.521302+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-pen","depends_on_id":"analyze-components-tools-bdx","type":"blocks","created_at":"2026-02-18T11:05:16.439881+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-qyo","title":"Symlink slash commands instead of copying — updates propagate automatically","description":"setup.sh currently 'cp' the .md skill files into .claude/commands/infra-basic/. When the tool is updated (git pull), target projects don't get the new skill content. Change setup.sh to create symlinks instead: 'ln -sf $TOOL_DIR/.claude/commands/infra-basic/simulator-inspector-on.md $CMD_DIR/'. Add a note in the README that git pull on the tool dir is sufficient to update all linked projects.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T10:58:59.952461+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.454514+07:00","closed_at":"2026-02-18T11:12:20.454514+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-rio","title":"P0: Fix xcodeproj module indexing regressions","description":"Fix two indexing bugs: (1) PBXBuildFile fileRef values include inline comments causing fileRef lookup misses; (2) buildModuleIndex stops on xcodeproj strategy even when zero source files are resolved, blocking fallback strategies.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T13:26:00.746859+07:00","created_by":"Hanif","updated_at":"2026-02-18T13:26:52.440365+07:00","closed_at":"2026-02-18T13:26:52.440365+07:00","close_reason":"Both xcodeproj indexing fixes implemented and syntax/smoke checks passed","labels":["bug"]}
{"id":"analyze-components-tools-rio.1","title":"Fix PBXBuildFile fileRef parsing to strip comment suffix","description":"In resolveSourcesFromPhases, normalize extracted fileRef to bare hex ID before map lookup so PBXBuildFile entries like 'ABC123 /* Foo.swift */' resolve correctly.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T13:26:07.15084+07:00","created_by":"Hanif","updated_at":"2026-02-18T13:26:37.944371+07:00","closed_at":"2026-02-18T13:26:37.944381+07:00"}
{"id":"analyze-components-tools-rio.2","title":"Allow strategy fallback when xcodeproj yields zero source files","description":"In buildModuleIndex strategy loop, only commit a strategy when reverse lookup has files. If a strategy finds structure but no sources, clear intermediate state and continue to next strategy (including directory scan fallback).","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T13:26:07.152177+07:00","created_by":"Hanif","updated_at":"2026-02-18T13:26:52.363376+07:00","closed_at":"2026-02-18T13:26:52.363376+07:00","close_reason":"Implemented strategy-loop fallback: only accept strategy when reverse lookup has source files; otherwise clear and continue","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-rio.2","depends_on_id":"analyze-components-tools-rio","type":"parent-child","created_at":"2026-02-18T13:26:07.152717+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72","title":"P0 Bug: Inspection loop never exits — Claude keeps re-calling wait_for_selection/get_hierarchy after component selection","description":"After Step 3 (inspector_start) and Step 4 (wait_for_selection returns a component), Claude enters an infinite loop. Instead of waiting for user input, it keeps calling wait_for_selection and get_hierarchy repeatedly. Root causes: (1) Double-delivery of clicks via stdout + file watcher, (2) No queue deduplication, (3) Immediate unlock.trigger re-arms overlay, (4) Skill command instructs immediate re-loop, (5) No completion signal in tool responses, (6) get_hierarchy has no staleness guard.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T11:56:34.882001+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:03.261024+07:00","closed_at":"2026-02-18T11:59:03.261024+07:00","close_reason":"All child fixes completed and validated with JS syntax checks","labels":["bug"]}
{"id":"analyze-components-tools-s72.1","title":"Fix: Add deduplication to OverlayBridge._deliver() — skip duplicate component IDs","description":"In src/overlay-bridge.js, _deliver() pushes to _queue without checking for duplicates. If the same component is clicked twice, or if double-delivery occurs (stdout + file watcher), the queue accumulates duplicates. Fix: track lastDeliveredId+timestamp, skip _deliver if same ID within a short window (e.g. 500ms).","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T11:56:40.377917+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.011388+07:00","closed_at":"2026-02-18T11:59:01.011388+07:00","close_reason":"Implemented in src/overlay-bridge.js: duplicate selection suppression by id/time window","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.1","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:40.379115+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.2","title":"Fix: Prevent double-delivery — disable file watcher when stdout listener is active","description":"In src/overlay-bridge.js, when the bridge spawns the overlay process itself, both the stdout readline listener (line 54-60) AND the background file watcher (line 74-83) are active. A single click produces events on both channels. Fix: when the bridge owns the process and stdout is available, skip starting the background file watcher.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T11:56:43.32449+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.083591+07:00","closed_at":"2026-02-18T11:59:01.083591+07:00","close_reason":"Implemented in src/overlay-bridge.js: background watcher disabled when stdout events are owned","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.2","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:43.325283+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.3","title":"Fix: Delay unlock.trigger write — don't re-arm overlay until consumer processes selection","description":"In src/overlay-bridge.js _deliver() line 98, unlock.trigger is written immediately, causing the Swift overlay to clear its lock within 500ms. This re-arms the overlay before Claude finishes processing. Fix: move unlock.trigger write to waitForClick() return path, so the overlay only unlocks after the consumer (wait_for_selection tool) has received and processed the data.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T11:56:45.972568+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.148201+07:00","closed_at":"2026-02-18T11:59:01.148201+07:00","close_reason":"Implemented in src/overlay-bridge.js: unlock trigger moved from _deliver to waitForClick resolution path","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.3","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:45.973243+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.4","title":"Fix: Update skill command — require explicit 'next' before re-entering wait loop","description":"In .claude/commands/infra-basic/simulator-inspector-on.md line 73, the skill says 'immediately call wait_for_selection again'. This is the primary cause of the loop. Fix: change to require user to explicitly say 'next', click Select in overlay, or tap a new component before re-entering the wait loop. Add clear exit instructions.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T11:56:48.633225+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.213848+07:00","closed_at":"2026-02-18T11:59:01.213848+07:00","close_reason":"Implemented in .claude command: explicit next required before re-entering selection wait loop","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.4","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:48.633987+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.5","title":"Add session_status field to wait_for_selection response","description":"In src/server.js wait_for_selection tool (line 166-239), the response has no status field indicating the cycle is complete. Add a 'session_status: awaiting_user_action' field to the response so Claude knows not to auto-loop.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T11:56:50.954677+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.279792+07:00","closed_at":"2026-02-18T11:59:01.279792+07:00","close_reason":"Implemented in src/server.js: wait_for_selection now returns session status awaiting user action","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.5","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:50.955352+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.6","title":"Add staleness guard to get_hierarchy — reject data older than 5 minutes","description":"In src/server.js get_hierarchy tool (line 127-128), loadHierarchy() returns data regardless of age. Claude can keep calling get_hierarchy and always get results, reinforcing the inspection loop. Fix: add a timestamp freshness check (e.g. 5 minutes) and return an error asking to re-run inspector_start if stale.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T11:56:53.829858+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.344651+07:00","closed_at":"2026-02-18T11:59:01.344651+07:00","close_reason":"Implemented in src/server.js: get_hierarchy now rejects stale hierarchy older than 5 minutes","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.6","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:53.830604+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-tid","title":"Design auto-analysis prompt template for selected components","description":"Define the structured prompt sent to Claude after a component is selected. Should include: component class + name, file:line snippet (±20 lines), evidence chain, confidence. Output should cover: component identity, responsibility, interactions fired, callback chain, missing wiring or bugs noticed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-18T09:59:36.854063+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.794421+07:00","closed_at":"2026-02-18T11:12:20.794421+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-tid","depends_on_id":"analyze-components-tools-6vc","type":"blocks","created_at":"2026-02-18T09:59:39.8423+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-u74","title":"Optimize geometry detection — cache or reduce subprocess calls","description":"detectGeometry() in src/geometry.js spawns 3 separate swift processes + xcrun simctl screenshot + sips, adding ~5-10 seconds to each scan. Options: (1) cache geometry result and reuse if simulator window size hasn't changed, (2) combine the swift subprocesses into a single script, (3) skip screenshot-based detection when Point Accurate mode can be assumed.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-02-17T22:36:54.781011+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:40:36.859972+07:00","closed_at":"2026-02-17T22:40:36.859972+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-vga","title":"Update resolveSourcesFromPhases to use full resolved paths","description":"Accept fileRefPathMap parameter, prefer full paths from map, fall back to PBXFileReference path field","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:07:59.875806+07:00","created_by":"Hanif","updated_at":"2026-02-18T15:13:03.898402+07:00","closed_at":"2026-02-18T15:13:03.898402+07:00","close_reason":"done","dependencies":[{"issue_id":"analyze-components-tools-vga","depends_on_id":"analyze-components-tools-0ds","type":"blocks","created_at":"2026-02-18T15:07:59.876617+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-vt1","title":"Pre-built overlay binary via GitHub Releases — eliminate Xcode build requirement","description":"Currently setup.sh calls build-overlay.sh which runs 'swift build -c release'. This requires Xcode command line tools (~10min install) and takes 30-60s to compile. Publish pre-built arm64/x86_64 binaries as GitHub Release assets. setup.sh should: (1) check arch, (2) try to download matching binary from latest release with curl, (3) fall back to local build if download fails or --build-from-source flag passed.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-18T10:58:01.824994+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.588497+07:00","closed_at":"2026-02-18T11:12:20.588497+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-xwy","title":"Fix: overlay should remain in Select mode after Clear without requiring skill re-run","description":"When user taps ✕ Clear, the overlay enters Select mode (Swift side already does this). But if wait_for_selection has already returned and no new call is pending, the next click gets buffered. Verify the full loop: Clear → Select mode → click → buffered → next wait_for_selection returns instantly.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-18T09:58:53.736426+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:44.811461+07:00","closed_at":"2026-02-18T10:10:44.811461+07:00","close_reason":"Overlay auto-rearms on Clear; skill loop handles the rest.","dependencies":[{"issue_id":"analyze-components-tools-xwy","depends_on_id":"analyze-components-tools-oih","type":"blocks","created_at":"2026-02-18T09:59:24.189994+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-yas","title":"P0: Clear button stops inspector — skill no longer listens after tap","description":"After selecting a component and tapping '✕ Clear' on the overlay, the inspector goes idle. Calling /infra-basic:simulator-inspector-on again does not resume wait_for_selection — the bridge background watcher stops and no further selections are delivered. Regression introduced with queue-based bridge refactor.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-18T09:58:43.46381+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:40.774477+07:00","closed_at":"2026-02-18T10:10:40.774477+07:00","close_reason":"Fixed by skill loop (simulator-inspector-on.md Step 4 now loops), bridge queue approach, and overlay auto-rearm on Clear."}
