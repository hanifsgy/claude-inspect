{"id":"analyze-components-tools-01f","title":"P0: Overlay does not rerender accessibility on screen/page change","description":"Inspector overlay frames stay stale after navigating to another screen in Simulator. Accessibility hierarchy should be rescanned and overlay must rerender automatically without manual restart.","status":"closed","priority":0,"issue_type":"bug","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:55:48.138655+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:56:23.965333+07:00","closed_at":"2026-02-17T22:56:23.965333+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-05e","title":"Prerequisites checker in setup.sh — validate node, axe, simulator before completing","description":"setup.sh should check: (1) node --version \u003e= 18 and print actionable error if not, (2) 'command -v axe' — if missing, print install URL (https://github.com/nicklama/axe) and exit, (3) xcrun simctl list devices booted has at least one booted device — warn if not (non-fatal). Currently axe absence causes silent failure only when the inspector is first run.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T10:58:53.769522+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.387378+07:00","closed_at":"2026-02-18T11:12:20.387378+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-49u","title":"Remove dead code: scripts/detect-content-rect.swift","description":"scripts/detect-content-rect.swift was created to pixel-scan the simulator window image for exact bezel detection, but CGWindowListCreateImage returns nil on macOS 15+ (deprecated API). The script is unused — geometry detection is now handled by src/geometry.js instead. Delete the file.","status":"closed","priority":4,"issue_type":"chore","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:37:00.863901+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:40:42.697045+07:00","closed_at":"2026-02-17T22:40:42.697045+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-4kl","title":"File mapper maps 0/23 elements — AXe class names don't match project classes","description":"AXe returns UIKit base class names (UIButton, UILabel, UIView) which don't match the project's custom class names (ViewController, HomeInteractor, etc.). The file-mapper reconcile step finds 0 matches because it looks for exact class name matches in .swift files. Need a smarter matching strategy — e.g. scan for accessibilityIdentifier assignments, or match by view hierarchy structure rather than class name alone.","status":"closed","priority":2,"issue_type":"bug","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:36:34.767942+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:39:43.817067+07:00","closed_at":"2026-02-17T22:39:43.817067+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-6vc","title":"Feature: auto-analyse selected component after wait_for_selection resolves","description":"After wait_for_selection returns a component, the skill should automatically read the source file at the returned file:line and produce a structured analysis covering: (1) what the component is, (2) what it does / its responsibility, (3) user interactions it handles, (4) callbacks/closures it fires and where they lead, (5) any bugs or missing wiring observed. This replaces the current behaviour where the skill just prints raw metadata and stops.","status":"closed","priority":1,"issue_type":"feature","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:59:29.660552+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.655077+07:00","closed_at":"2026-02-18T11:12:20.655077+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-8ye","title":"Architecture mapping logic for large multi-module repos","description":"Design and implement robust mapping from on-screen AX hierarchy to source metadata (file:line, parent class, dependencies) for monorepos, XcodeGen setups, and embedded frameworks. Include confidence scoring, module-aware resolution, and manual override support.","notes":"All 6 subtasks completed. Created src/mapping/ module with: (1) contract.js — enriched node schema with 9 signal types, weighted confidence scoring (max-plus-boost), and ambiguity detection. (2) module-indexer.js — parses .xcodeproj (incl. fileSystemSynchronizedGroups), XcodeGen, SPM, with directory fallback. (3) candidate-matcher.js — multi-signal matching: identifier_exact (0.9), identifier_prefix (0.6) for dynamic patterns, label_exact (0.5), class_name (0.7), class_inheritance (0.3). Includes owner-type detection. (4) overrides.js — manual config/inspector-map.json with exact + glob patterns. (5) cache.js — mtime-fingerprint caching skips re-indexing when files unchanged. (6) diagnostics.js — coverage%, confidence distribution, per-node explain with evidence chains. Integrated into scan.js pipeline. Results: 19/20 mapped (95%) vs 0/23 with old class-only matching.","status":"closed","priority":1,"issue_type":"epic","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:53:59.714892+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:24:00.795431+07:00","closed_at":"2026-02-18T07:24:00.795434+07:00"}
{"id":"analyze-components-tools-8ye.1","title":"Define mapping contract and confidence model","description":"Specify enriched node schema: mappedModule, ownerType, confidence, evidence[], provenance(manual|auto), and ambiguity flags. Define scoring weights and acceptance thresholds.","notes":"Created src/mapping/contract.js with: enriched node schema (ownerType, mappedModule, confidence, evidence[], provenance, ambiguous flag, candidates[]), 9 signal types with weights, confidence thresholds (HIGH=0.7, MEDIUM=0.4), max-plus-boost scoring algorithm, createEvidence/computeConfidence/createEnrichedNode helpers, override entry and module index type definitions.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:54:08.703005+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:10:35.655148+07:00","closed_at":"2026-02-18T07:10:35.655153+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.1","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.704424+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.2","title":"Build module/target graph indexer","description":"Parse XcodeGen project.yml and/or .xcodeproj to derive target graph, module ownership, imports, and embedding relationships. Persist index for fast lookup.","notes":"Created src/mapping/module-indexer.js. Supports 4 strategies: XcodeGen project.yml, SPM Package.swift, .xcodeproj (both fileSystemSynchronizedGroups for Xcode 16+ and traditional PBXSourcesBuildPhase), and directory-scan fallback. Tested against Wiki project — correctly parses 3 targets (Wiki app + 2 test targets) with proper source file lists via xcodeproj strategy. Provides ModuleIndex class with moduleForFile(), sourcesForModule(), dependenciesOf() lookups and JSON serialization.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:54:08.794296+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:16:58.618577+07:00","closed_at":"2026-02-18T07:16:58.618586+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.2","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.794949+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.2","depends_on_id":"analyze-components-tools-8ye.1","type":"blocks","created_at":"2026-02-17T22:54:24.17986+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.3","title":"Implement candidate matcher with weighted signals","description":"Match AX nodes using identifier, accessibilityIdentifier literals, labels, class hints, hierarchy position, and module scope. Return top candidates with confidence and evidence.","notes":"Created src/mapping/candidate-matcher.js. Implements 5 signal types: IDENTIFIER_EXACT (0.9w), IDENTIFIER_PREFIX (0.6w, handles dynamic patterns like 'card.\\(index)'), LABEL_EXACT (0.5w), CLASS_NAME (0.7w), CLASS_INHERITANCE (0.3w). Builds 4 source indexes: classIndex, identifierIndex (with prefix keys for dynamic patterns), labelIndex, moduleIndex. Includes ownerType detection via brace-depth tracking. Tested: 19/20 AX nodes mapped (vs 0/23 with old class-name-only approach). 6 at 90% confidence (exact identifier), 13 at 60% (prefix pattern). Override support included.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:54:08.872665+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:18:47.312711+07:00","closed_at":"2026-02-18T07:18:47.312726+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.3","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.873279+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.3","depends_on_id":"analyze-components-tools-8ye.1","type":"blocks","created_at":"2026-02-17T22:54:24.24243+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.3","depends_on_id":"analyze-components-tools-8ye.2","type":"blocks","created_at":"2026-02-17T22:54:24.306609+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.4","title":"Add manual override ingestion","description":"Support config/inspector-map.json for explicit AX id -\u003e file:line/module overrides and screen-level module priorities. Manual overrides take precedence over auto matches.","notes":"Created src/mapping/overrides.js — loads config/inspector-map.json with manual AX-to-source overrides (exact + glob patterns) and module priority list. Created config/inspector-map.json template. Wired overrides into scan.js pipeline. Created src/mapping/index.js barrel export. Full pipeline tested: 19/20 AX nodes mapped with confidence scoring (6 high @90%, 13 medium @60%).","status":"closed","priority":2,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:54:08.947367+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:21:48.943653+07:00","closed_at":"2026-02-18T07:21:48.943656+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.4","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:08.948012+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.4","depends_on_id":"analyze-components-tools-8ye.1","type":"blocks","created_at":"2026-02-17T22:54:24.3708+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.4","depends_on_id":"analyze-components-tools-8ye.2","type":"blocks","created_at":"2026-02-17T22:54:24.436536+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.5","title":"Add incremental indexing and caches","description":"Cache symbol/module index by file hash/mtime and reuse mapping when simulator window + code index unchanged. Avoid full rescans in large repos.","notes":"Created src/mapping/cache.js — file-mtime fingerprint caching for source indexes. Uses MD5 hash of sorted file paths + mtimes. Cache stored at state/index-cache.json. Integrated into buildSourceIndexes: first run builds fresh indexes and saves cache, subsequent runs load from cache if no Swift files changed. Tested: second scan correctly hits cache ('Source indexes loaded from cache (20 files unchanged)').","status":"closed","priority":2,"issue_type":"chore","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:54:09.020036+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:23:03.527758+07:00","closed_at":"2026-02-18T07:23:03.527777+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.5","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:09.020635+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.5","depends_on_id":"analyze-components-tools-8ye.2","type":"blocks","created_at":"2026-02-17T22:54:24.500511+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-8ye.6","title":"Add diagnostics and quality metrics","description":"Expose mapping coverage %, ambiguous count, confidence distribution, and per-node explain output for why a mapping was selected.","notes":"Created src/mapping/diagnostics.js — computeMetrics() returns coverage%, confidence distribution, ambiguity count, signal usage breakdown, files/modules touched. formatMetrics() for human-readable summary. explainNode() shows per-node evidence chain with signal weights and alternative candidates. generateReport() combines both into a full diagnostic report. Updated barrel export. Tested against Wiki: report correctly shows 95% coverage, 6 high/13 medium confidence, 13 ambiguous nodes, with per-node evidence trails.","status":"closed","priority":2,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:54:09.090577+07:00","created_by":"Hanif","updated_at":"2026-02-18T07:23:46.530335+07:00","closed_at":"2026-02-18T07:23:46.530338+07:00","dependencies":[{"issue_id":"analyze-components-tools-8ye.6","depends_on_id":"analyze-components-tools-8ye","type":"parent-child","created_at":"2026-02-17T22:54:09.091159+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.6","depends_on_id":"analyze-components-tools-8ye.3","type":"blocks","created_at":"2026-02-17T22:54:24.564553+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-8ye.6","depends_on_id":"analyze-components-tools-8ye.4","type":"blocks","created_at":"2026-02-17T22:54:24.628965+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-a98","title":"Update skill prompt: loop wait_for_selection + auto-analysis after each pick","description":"Update /infra-basic:simulator-inspector-on skill (simulator-inspector-on.md or equivalent) so Step 4 becomes a loop: call wait_for_selection → run auto-analysis → call wait_for_selection again. The loop continues until timeout or user says stop. This makes the inspector feel like a persistent session rather than a one-shot tool.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:59:36.786385+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.725105+07:00","closed_at":"2026-02-18T11:12:20.725105+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-a98","depends_on_id":"analyze-components-tools-6vc","type":"blocks","created_at":"2026-02-18T09:59:39.760165+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-aid","title":"Remove Select button from status bar","description":"Remove the 'Select' button from the StatusBarView bottom bar. The selection mode UX (hover→click→save) adds complexity without clear benefit in current workflow. Keep Refresh and Close buttons. Update StatusBarView.swift to remove the button and onSelect callback, and remove setSelectionMode logic from main.swift and OverlayWindow.swift.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:36:41.777575+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:38:29.965708+07:00","closed_at":"2026-02-17T22:38:29.965708+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-bdx","title":"P0 Bug: setup.sh never runs npm install — MCP server crashes on fresh clone","description":"setup.sh copies .mcp.json, settings, and slash commands but never runs 'npm install' in the tool directory. On a fresh clone node_modules does not exist so 'node src/server.js' fails immediately when Claude Code tries to connect to the MCP server. Fix: add 'npm install --prefix $TOOL_DIR' (or check if node_modules exists) in setup.sh before the overlay build step.","status":"closed","priority":0,"issue_type":"bug","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T10:57:58.632025+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:07:38.065285+07:00","closed_at":"2026-02-18T11:07:38.065285+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-fes","title":"Filter out root UIApplication element from overlay rendering","description":"The UIApplication frame (full screen 402x874) draws a large blue rectangle covering the entire screen, which is not useful as a component outline and clutters the overlay. Either filter it out in scan.js before outputting components, or skip drawing it in OverlayView.swift (e.g. skip components where className == 'UIApplication').","status":"closed","priority":2,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:36:47.925868+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:39:59.712831+07:00","closed_at":"2026-02-17T22:39:59.712831+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-i9b","title":"Fix: bridge background watcher must survive across skill re-invocations","description":"After identifying root cause from the investigation task: ensure _bgTimer keeps running (or restarts cleanly) when inspector_start is called a second time. The MCP server process is long-lived so the bridge instance persists — ensure start() is idempotent and _startBackground() does not exit prematurely.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:58:53.664037+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:44.740264+07:00","closed_at":"2026-02-18T10:10:44.740264+07:00","close_reason":"Bridge watcher already always-on; skill loop resolves consumption gap.","dependencies":[{"issue_id":"analyze-components-tools-i9b","depends_on_id":"analyze-components-tools-oih","type":"blocks","created_at":"2026-02-18T09:59:24.111348+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-od5","title":"Global install script — one curl command installs everything from scratch","description":"There is no path for users who haven't cloned the repo yet. Add install.sh at repo root that: (1) checks prerequisites (node\u003e=18, axe, git), (2) clones repo to ~/.claude-inspect or user-specified dir, (3) runs npm install, (4) downloads or builds overlay binary, (5) runs setup.sh in CWD. Usable as: bash \u003c(curl -sL https://raw.githubusercontent.com/hanifsgy/claude-inspect/main/install.sh)","status":"closed","priority":1,"issue_type":"feature","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T10:58:49.07865+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:13:09.200546+07:00","closed_at":"2026-02-18T11:13:09.200546+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-od5","depends_on_id":"analyze-components-tools-bdx","type":"blocks","created_at":"2026-02-18T11:05:16.208277+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-od5","depends_on_id":"analyze-components-tools-vt1","type":"blocks","created_at":"2026-02-18T11:05:16.294379+07:00","created_by":"Hanif"},{"issue_id":"analyze-components-tools-od5","depends_on_id":"analyze-components-tools-05e","type":"blocks","created_at":"2026-02-18T11:05:16.368641+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-oih","title":"Investigate: why bridge watcher stops after Clear tap","description":"Reproduce the exact sequence: select component → locked → Clear tapped → skill re-invoked. Trace whether _bgTimer is still running, whether _startBackground() is re-entered, and whether pgrep detects the existing overlay on the second skill invocation. Identify root cause before fixing.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:58:53.588085+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:44.561355+07:00","closed_at":"2026-02-18T10:10:44.561355+07:00","close_reason":"Root cause identified and fixed via skill loop.","dependencies":[{"issue_id":"analyze-components-tools-oih","depends_on_id":"analyze-components-tools-yas","type":"blocks","created_at":"2026-02-18T09:59:24.03871+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-pen","title":"Post-install health check — verify MCP server, overlay binary, and hook all work","description":"Add a 'setup.sh --verify' or standalone 'scripts/doctor.sh' that checks: (1) node src/server.js starts without error (quick smoke test), (2) overlay binary exists and is executable, (3) hook file is executable and produces valid JSON output, (4) .mcp.json and settings.local.json parse correctly, (5) axe describe-ui works. Print a clear pass/fail summary so users can diagnose issues before opening Claude Code.","status":"closed","priority":2,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T10:59:05.303858+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.521302+07:00","closed_at":"2026-02-18T11:12:20.521302+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-pen","depends_on_id":"analyze-components-tools-bdx","type":"blocks","created_at":"2026-02-18T11:05:16.439881+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-qyo","title":"Symlink slash commands instead of copying — updates propagate automatically","description":"setup.sh currently 'cp' the .md skill files into .claude/commands/infra-basic/. When the tool is updated (git pull), target projects don't get the new skill content. Change setup.sh to create symlinks instead: 'ln -sf $TOOL_DIR/.claude/commands/infra-basic/simulator-inspector-on.md $CMD_DIR/'. Add a note in the README that git pull on the tool dir is sufficient to update all linked projects.","status":"closed","priority":2,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T10:58:59.952461+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.454514+07:00","closed_at":"2026-02-18T11:12:20.454514+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-s72","title":"P0 Bug: Inspection loop never exits — Claude keeps re-calling wait_for_selection/get_hierarchy after component selection","description":"After Step 3 (inspector_start) and Step 4 (wait_for_selection returns a component), Claude enters an infinite loop. Instead of waiting for user input, it keeps calling wait_for_selection and get_hierarchy repeatedly. Root causes: (1) Double-delivery of clicks via stdout + file watcher, (2) No queue deduplication, (3) Immediate unlock.trigger re-arms overlay, (4) Skill command instructs immediate re-loop, (5) No completion signal in tool responses, (6) get_hierarchy has no staleness guard.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:34.882001+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:03.261024+07:00","closed_at":"2026-02-18T11:59:03.261024+07:00","close_reason":"All child fixes completed and validated with JS syntax checks","labels":["bug"]}
{"id":"analyze-components-tools-s72.1","title":"Fix: Add deduplication to OverlayBridge._deliver() — skip duplicate component IDs","description":"In src/overlay-bridge.js, _deliver() pushes to _queue without checking for duplicates. If the same component is clicked twice, or if double-delivery occurs (stdout + file watcher), the queue accumulates duplicates. Fix: track lastDeliveredId+timestamp, skip _deliver if same ID within a short window (e.g. 500ms).","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:40.377917+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.011388+07:00","closed_at":"2026-02-18T11:59:01.011388+07:00","close_reason":"Implemented in src/overlay-bridge.js: duplicate selection suppression by id/time window","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.1","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:40.379115+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.2","title":"Fix: Prevent double-delivery — disable file watcher when stdout listener is active","description":"In src/overlay-bridge.js, when the bridge spawns the overlay process itself, both the stdout readline listener (line 54-60) AND the background file watcher (line 74-83) are active. A single click produces events on both channels. Fix: when the bridge owns the process and stdout is available, skip starting the background file watcher.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:43.32449+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.083591+07:00","closed_at":"2026-02-18T11:59:01.083591+07:00","close_reason":"Implemented in src/overlay-bridge.js: background watcher disabled when stdout events are owned","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.2","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:43.325283+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.3","title":"Fix: Delay unlock.trigger write — don't re-arm overlay until consumer processes selection","description":"In src/overlay-bridge.js _deliver() line 98, unlock.trigger is written immediately, causing the Swift overlay to clear its lock within 500ms. This re-arms the overlay before Claude finishes processing. Fix: move unlock.trigger write to waitForClick() return path, so the overlay only unlocks after the consumer (wait_for_selection tool) has received and processed the data.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:45.972568+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.148201+07:00","closed_at":"2026-02-18T11:59:01.148201+07:00","close_reason":"Implemented in src/overlay-bridge.js: unlock trigger moved from _deliver to waitForClick resolution path","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.3","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:45.973243+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.4","title":"Fix: Update skill command — require explicit 'next' before re-entering wait loop","description":"In .claude/commands/infra-basic/simulator-inspector-on.md line 73, the skill says 'immediately call wait_for_selection again'. This is the primary cause of the loop. Fix: change to require user to explicitly say 'next', click Select in overlay, or tap a new component before re-entering the wait loop. Add clear exit instructions.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:48.633225+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.213848+07:00","closed_at":"2026-02-18T11:59:01.213848+07:00","close_reason":"Implemented in .claude command: explicit next required before re-entering selection wait loop","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.4","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:48.633987+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.5","title":"Add session_status field to wait_for_selection response","description":"In src/server.js wait_for_selection tool (line 166-239), the response has no status field indicating the cycle is complete. Add a 'session_status: awaiting_user_action' field to the response so Claude knows not to auto-loop.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:50.954677+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.279792+07:00","closed_at":"2026-02-18T11:59:01.279792+07:00","close_reason":"Implemented in src/server.js: wait_for_selection now returns session status awaiting user action","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.5","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:50.955352+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-s72.6","title":"Add staleness guard to get_hierarchy — reject data older than 5 minutes","description":"In src/server.js get_hierarchy tool (line 127-128), loadHierarchy() returns data regardless of age. Claude can keep calling get_hierarchy and always get results, reinforcing the inspection loop. Fix: add a timestamp freshness check (e.g. 5 minutes) and return an error asking to re-run inspector_start if stale.","status":"closed","priority":2,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T11:56:53.829858+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:59:01.344651+07:00","closed_at":"2026-02-18T11:59:01.344651+07:00","close_reason":"Implemented in src/server.js: get_hierarchy now rejects stale hierarchy older than 5 minutes","labels":["task"],"dependencies":[{"issue_id":"analyze-components-tools-s72.6","depends_on_id":"analyze-components-tools-s72","type":"parent-child","created_at":"2026-02-18T11:56:53.830604+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-tid","title":"Design auto-analysis prompt template for selected components","description":"Define the structured prompt sent to Claude after a component is selected. Should include: component class + name, file:line snippet (±20 lines), evidence chain, confidence. Output should cover: component identity, responsibility, interactions fired, callback chain, missing wiring or bugs noticed.","status":"closed","priority":1,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:59:36.854063+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.794421+07:00","closed_at":"2026-02-18T11:12:20.794421+07:00","close_reason":"Closed","dependencies":[{"issue_id":"analyze-components-tools-tid","depends_on_id":"analyze-components-tools-6vc","type":"blocks","created_at":"2026-02-18T09:59:39.8423+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-u74","title":"Optimize geometry detection — cache or reduce subprocess calls","description":"detectGeometry() in src/geometry.js spawns 3 separate swift processes + xcrun simctl screenshot + sips, adding ~5-10 seconds to each scan. Options: (1) cache geometry result and reuse if simulator window size hasn't changed, (2) combine the swift subprocesses into a single script, (3) skip screenshot-based detection when Point Accurate mode can be assumed.","status":"closed","priority":3,"issue_type":"chore","owner":"hanifsgy@gmail.com","created_at":"2026-02-17T22:36:54.781011+07:00","created_by":"Hanif","updated_at":"2026-02-17T22:40:36.859972+07:00","closed_at":"2026-02-17T22:40:36.859972+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-vt1","title":"Pre-built overlay binary via GitHub Releases — eliminate Xcode build requirement","description":"Currently setup.sh calls build-overlay.sh which runs 'swift build -c release'. This requires Xcode command line tools (~10min install) and takes 30-60s to compile. Publish pre-built arm64/x86_64 binaries as GitHub Release assets. setup.sh should: (1) check arch, (2) try to download matching binary from latest release with curl, (3) fall back to local build if download fails or --build-from-source flag passed.","status":"closed","priority":1,"issue_type":"feature","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T10:58:01.824994+07:00","created_by":"Hanif","updated_at":"2026-02-18T11:12:20.588497+07:00","closed_at":"2026-02-18T11:12:20.588497+07:00","close_reason":"Closed"}
{"id":"analyze-components-tools-xwy","title":"Fix: overlay should remain in Select mode after Clear without requiring skill re-run","description":"When user taps ✕ Clear, the overlay enters Select mode (Swift side already does this). But if wait_for_selection has already returned and no new call is pending, the next click gets buffered. Verify the full loop: Clear → Select mode → click → buffered → next wait_for_selection returns instantly.","status":"closed","priority":0,"issue_type":"task","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:58:53.736426+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:44.811461+07:00","closed_at":"2026-02-18T10:10:44.811461+07:00","close_reason":"Overlay auto-rearms on Clear; skill loop handles the rest.","dependencies":[{"issue_id":"analyze-components-tools-xwy","depends_on_id":"analyze-components-tools-oih","type":"blocks","created_at":"2026-02-18T09:59:24.189994+07:00","created_by":"Hanif"}]}
{"id":"analyze-components-tools-yas","title":"P0: Clear button stops inspector — skill no longer listens after tap","description":"After selecting a component and tapping '✕ Clear' on the overlay, the inspector goes idle. Calling /infra-basic:simulator-inspector-on again does not resume wait_for_selection — the bridge background watcher stops and no further selections are delivered. Regression introduced with queue-based bridge refactor.","status":"closed","priority":0,"issue_type":"bug","owner":"hanifsgy@gmail.com","created_at":"2026-02-18T09:58:43.46381+07:00","created_by":"Hanif","updated_at":"2026-02-18T10:10:40.774477+07:00","closed_at":"2026-02-18T10:10:40.774477+07:00","close_reason":"Fixed by skill loop (simulator-inspector-on.md Step 4 now loops), bridge queue approach, and overlay auto-rearm on Clear."}
